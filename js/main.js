$(document).ready(function(){function e(){var e=$("nav").offset().top+100;$(window).scrollTop()>=e?($(".fixed-nav-wrap").addClass("fixed-nav-wrap--active"),$(".sub-menu-overlay").hide(),$(".sub-menu-overlay--fixed").show()):($(".fixed-nav-wrap").removeClass("fixed-nav-wrap--active"),$(".sub-menu-overlay").show(),$(".sub-menu-overlay--fixed").hide(),$(".sub-menu-wrap--active").removeClass("sub-menu-wrap--active"),$(".main-menu__item--active").removeClass("main-menu__item--active"),$(".sub-menu-overlay").removeClass("sub-menu-overlay--active"))}$("#geo-map").length&&baron({root:".baron",scroller:".baron__scroller",bar:".baron__bar",scrollingCls:"_scrolling",draggingCls:"_dragging"}).controls({track:".baron__track",forward:".baron__down",backward:".baron__up"});(function(){function e(){i=setInterval(function(){var e=$(".main-slider__item--active").index()+1;e===$(".main-slide").length&&(e=0),a(e,!1)},1e4)}var a=function(a,s){s&&(clearInterval(i),e()),$(".main-slide--active").removeClass("main-slide--active"),$(".main-slider__item--active").removeClass("main-slider__item--active"),$($(".main-slide")[a]).addClass("main-slide--active"),$($(".main-slider__item")[a]).addClass("main-slider__item--active")};$("#next-main-slide").click(function(){var e=$(".main-slide--active").index()+1;e===$(".main-slide").length&&(e=0),a(e,!0)}),$("#prev-main-slide").click(function(){var e=$(".main-slide--active").index()-1;-1===e&&(e=$(".main-slide").length-1),a(e,!0)}),$(".main-slider__item").click(function(){var e=$(this).index();a(e,!0)});var i;e()})();$("nav").length&&$(window).scroll(function(){e()});var a=function(){var e;DG.then(function(){e=DG.map("geo-map",{center:[48.46897578085214,135.1129739999999],zoom:6,scrollWheelZoom:!1,dragging:!1});var a=DG.icon({iconUrl:"/ska/img/map-target.png",iconSize:[34,51],iconAnchor:[17,51],popupAnchor:[0,3.5]});if(e.on("zoomend",function(){this._popup&&$(this._popup._container).css("left","-240px")}),$(".contacts").length){popupHtml="<div class='map-popup'><div class='popup-logo'></div><p class='popup-text'>г. Иркутск, ул. Сурикова, 6</p><p class='popup-text'></p></div>";var i=DG.marker([52.288370288815706,104.27010500000002],{icon:a}).addTo(e).bindPopup(popupHtml);$("#show-office").click(function(){i.openPopup()}),i.on("popupopen",function(){$(this._popup._container).css("left","-240px"),e.setZoom(13),e.setView(i._latlng)})}$(".geography__target").each(function(){var i=JSON.parse($(this).attr("data-coords")),s=$(this).attr("data-adress"),t=$(this).attr("data-tel");popupHtml="<div class='map-popup'><div class='popup-logo'></div><p class='popup-text'>"+s+"</p><p class='popup-text'>"+t+"</p></div>";var o=DG.marker(i,{icon:a}).addTo(e).bindPopup(popupHtml),n=$(this);o.on("popupopen",function(){$(this._popup._container).css("left","-240px"),e.setZoom(13),e.setView(o._latlng),n.addClass("geography__target--active");var a=n.closest(".geography__region"),i=n.closest(".geography__area");a.hasClass("geography__region--active")?i.hasClass("geography__area--active")||($(".geography__area--active").find(".geography__targets").slideUp(),$(".geography__area--active").removeClass("geography__area--active"),i.addClass("geography__area--active"),n.closest(".geography__targets").slideDown()):($(".geography__region--active").find(".geography__areas").slideUp(),$(".geography__region--active").removeClass("geography__region--active"),$(".geography__area--active").find(".geography__targets").slideUp(),$(".geography__area--active").removeClass("geography__area--active"),a.addClass("geography__region--active"),i.addClass("geography__area--active"),n.closest(".geography__areas").slideDown(400,function(){n.closest(".geography__targets").slideDown()}))}),o.on("popupclose",function(){n.removeClass("geography__target--active")}),$(this).click(function(){$(this).hasClass("geography__target--active")?(o.closePopup(),$(this).removeClass("geography__target--active")):($(".geography__target--active").removeClass("geography__target--active"),$("html, body").animate({scrollTop:$("#geo-map").offset().top},1e3),o.openPopup(),$(this).addClass("geography__target--active"))})}),$(".geography__area--target").each(function(){var i=JSON.parse($(this).attr("data-coords")),s=$(this).attr("data-adress"),t=$(this).attr("data-tel");popupHtml="<div class='map-popup'><div class='popup-logo'></div><p class='popup-text'>"+s+"</p><p class='popup-text'>"+t+"</p></div>";var o=DG.marker(i,{icon:a}).addTo(e).bindPopup(popupHtml),n=$(this),c=$(this).closest(".geography__areas");o.on("popupopen",function(){$(this._popup._container).css("left","-240px"),e.setZoom(13),e.setView(o._latlng);var a=n.closest(".geography__region");a.hasClass("geography__region--active")||($(".geography__region--active").find(".geography__areas").slideUp(),$(".geography__region--active").removeClass("geography__region--active"),a.addClass("geography__region--active"),c.slideDown())}),$(this).click(function(){o.openPopup(),$("html, body").animate({scrollTop:$("#geo-map").offset().top},1e3)})})})};$("#geo-map").length&&a();var i=(function(){$(".geography__region-name").click(function(){var e=$(this).parent();e.hasClass("geography__region--active")?(e.removeClass("geography__region--active"),e.find(".geography__areas").slideUp()):($(".geography__region--active").find(".geography__areas").slideUp(),$(".geography__region--active").removeClass("geography__region--active"),$(".geography__area--active").find(".geography__targets").slideUp(),$(".geography__area--active").removeClass("geography__area--active"),e.addClass("geography__region--active"),e.find(".geography__areas").slideDown())}),$(".geography__area-name").click(function(){var e=$(this).parent();e.hasClass("geography__area--target")||(e.hasClass("geography__area--active")?(e.removeClass("geography__area--active"),e.find(".geography__targets").slideUp()):($(".geography__area--active").find(".geography__targets").slideUp(),$(".geography__area--active").removeClass("geography__area--active"),e.addClass("geography__area--active"),e.find(".geography__targets").slideDown()))})}(),function(){$("#open-auth").click(function(){$(".modal__close").trigger("click"),$("#auth-container").addClass("modal-container--active"),$("#auth").addClass("modal--active"),$(".modal-overlay").addClass("modal-overlay--active"),$("#auth #login").focus()}),$("#open-registration").click(function(){$(".modal__close").trigger("click"),$("#registration-container").addClass("modal-container--active"),$("#registration").addClass("modal--active"),$(".modal-overlay").addClass("modal-overlay--active"),$("#registration #r_login").focus()}),$("#open-callback").click(function(){$(".modal__close").trigger("click"),$("#callback-container").addClass("modal-container--active"),$("#callback").addClass("modal--active"),$(".modal-overlay").addClass("modal-overlay--active"),$("#callback #callback-name").focus()}),$("#open-reset").click(function(){$(".modal__close").trigger("click"),$("#reset-container").addClass("modal-container--active"),$("#reset").addClass("modal--active"),$(".modal-overlay").addClass("modal-overlay--active"),$("#reset #reset-login").focus()}),$(".modal__close").click(function(){$(".modal--active").removeClass("modal--active"),$(".modal-container--active").removeClass("modal-container--active"),$(".modal-overlay--active").removeClass("modal-overlay--active")}),$(".btn--close-modal").click(function(){$(".modal__close").trigger("click")}),$(".modal-container").click(function(e){$(this).hasClass("modal-container--active")&&!$(e.target).hasClass("modal")&&$(".modal__close").trigger("click")})}(),function(){$("#open-choose-city").click(function(){$("#choose-city").toggleClass("cities--active"),$(this).toggleClass("header__text--active")}),$("#m_open-choose-city").click(function(){$("#m_choose-city").toggleClass("cities--active"),$(this).toggleClass("header__text--active"),$(".sub-menu-overlay--mobile").toggleClass("sub-menu-overlay--active")})}(),function(){$(".main-menu__link--has-child").click(function(e){var a=$(this).closest(".main-menu__item"),i=a.find(".sub-menu-wrap");a.hasClass("main-menu__item--active")?(a.removeClass("main-menu__item--active"),i.removeClass("sub-menu-wrap--active"),$(".sub-menu-overlay").removeClass("sub-menu-overlay--active")):($(".sub-menu-wrap--active").removeClass("sub-menu-wrap--active"),$(".main-menu__item--active").removeClass("main-menu__item--active"),$(".sub-menu-overlay").addClass("sub-menu-overlay--active"),a.addClass("main-menu__item--active"),i.addClass("sub-menu-wrap--active"))}),$(".sub-menu-wrap__close").click(function(){var e=$(this).closest(".main-menu__item"),a=e.find(".sub-menu-wrap");a.removeClass("sub-menu-wrap--active"),e.removeClass("main-menu__item--active"),$(".sub-menu-overlay").removeClass("sub-menu-overlay--active")})}(),function(){var e=$(".up-wrap").offset().top-$(window).outerHeight(),a=$(".up-wrap");$(window).scroll(function(){$(this).scrollTop()>=e||$(this).scrollTop()<$(this).outerHeight()/2?a.removeClass("up-wrap--fixed"):$(this).scrollTop()>$(this).outerHeight()/2&&a.addClass("up-wrap--fixed")}),$(window).resize(function(){e=$(".up-wrap").offset().top-$(window).outerHeight(),$(this).trigger("scroll")}),$("#go-up").click(function(){$("html, body").animate({scrollTop:$("header").offset().top},500)})});$("#go-up").length&&i();(function(){$("#show-mobile-menu").click(function(){$(this).toggleClass("m_nav__show--active"),$("#mobile-menu").toggleClass("l_m_menu--active"),$(".sub-menu-overlay--mobile").toggleClass("sub-menu-overlay--active")}),$("span.m_menu-item__name").click(function(){$parent=$(this).parent(),$parent.hasClass("m_menu-item--active")?($parent.removeClass("m_menu-item--active"),$parent.find(".m_menu").slideUp()):(!$(this).hasClass("m_menu-item__name--second")&&$(".m_menu-item--active").length&&(console.log("asd"),$activeMenu=$(".m_menu-item--active"),$activeMenu.find(".m_menu").slideUp(),$activeMenu.removeClass("m_menu-item--active")),$(this).hasClass("m_menu-item__name--second")&&($activeMenu=$(".m_menu-item--second.m_menu-item--active"),$activeMenu.find(".m_menu--sub-sub").slideUp(),$activeMenu.removeClass("m_menu-item--active")),$parent.addClass("m_menu-item--active"),$(this).next().slideDown())}),$(window).scroll(function(){var e=$("#mobile-menu").offset().top+$("#mobile-menu").outerHeight();$("#mobile-menu").hasClass("l_m_menu--active")&&$(this).scrollTop()>e&&($("#show-mobile-menu").trigger("click"),$activeMenu=$(".m_menu-item--active"),$activeMenu.find(".m_menu").slideUp(),$activeMenu.removeClass("m_menu-item--active"))})})(),function(){$("span.service-teaser__link").click(function(){var e=$(this).closest(".service-teaser").find(".service-teaser__sub-list");$(this).hasClass("service-teaser--active")?($(this).removeClass("service-teaser--active"),e.slideUp()):($(".service-teaser--active").removeClass("service-teaser--active"),$(".service-teaser__sub-list").slideUp(),$(this).addClass("service-teaser--active"),e.slideDown())})}(),function(){$("#show-payment-form").click(function(){$("#payment-form").slideDown(function(){$($(".payment__form").find("input")[0]).focus()}),$(this).fadeOut(function(){$("#hide-payment-form").fadeIn()})}),$("#hide-payment-form").click(function(){$("#payment-form").slideUp(),$(this).fadeOut(function(){$("#show-payment-form").fadeIn()})})}(),function(){$(".service-menu__name--active + .service-menu__sub").slideDown(),$(".service-menu__name").click(function(){var e=$(this).closest(".service-menu__item"),a=$(this);$(this).hasClass("service-menu__name--active")?(e.find(".service-menu__sub").slideUp(),a.removeClass("service-menu__name--active")):($(".service-menu__sub").slideUp(),$("span.service-menu__name--active").removeClass("service-menu__name--active"),e.find(".service-menu__sub").slideDown(),a.addClass("service-menu__name--active"))})}();$("body").click(function(e){var a=$(e.target);!$("#choose-city").hasClass("cities--active")||a.hasClass("header__text--city")||a.hasClass("cities--active")||($("#choose-city").removeClass("cities--active"),$("#open-choose-city").removeClass("header__text--active")),!$(".sub-menu-wrap").hasClass("sub-menu-wrap--active")||a.hasClass("main-menu__link--has-child")||a.hasClass("sub-menu-wrap--active")||($(".sub-menu-wrap--active").removeClass("sub-menu-wrap--active"),$(".main-menu__item--active").removeClass("main-menu__item--active"),$(".sub-menu-overlay").removeClass("sub-menu-overlay--active"))}),$(".cities").click(function(){event.stopPropagation()}),$(".header__text--city").click(function(){event.stopPropagation()}),$(".sub-menu-wrap").click(function(){event.stopPropagation()}),$(".main-menu__link--has-child").click(function(){event.stopPropagation()}),$(".modal").click(function(){event.stopPropagation()})});